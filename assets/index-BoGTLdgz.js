import{r as l,j as n,a as d}from"./react-BkjPoRIh.js";import{c as b}from"./react-dom-DWN0RgAt.js";import{B as y}from"./react-router-dom-7sP44eeT.js";import{a as p}from"./axios-Cm0UX6qg.js";import{J as x}from"./jszip-C_GpTb5M.js";import{F as L}from"./file-saver-B00IKLHc.js";import{a as R,b as v}from"./react-router-BJqQYli6.js";import"./scheduler-CzFDRTuY.js";import"./@remix-run-DyVe-HVL.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function u(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?r.credentials="include":e.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(e){if(e.ep)return;e.ep=!0;const r=u(e);fetch(e.href,r)}})();const w=()=>{const[a,u]=l.useState([]),[s,e]=l.useState(!1),r=l.useRef(null),o=l.useRef(null),m=async()=>{try{const t=await p.get("http://192.168.1.110:8080/photo.jpg",{responseType:"blob"});if(L.saveAs(t.data,"captura.jpg"),o.current){const c=URL.createObjectURL(t.data);o.current.src=c}}catch(t){console.error("Error al capturar la imagen:",t)}};l.useEffect(()=>(s?r.current=setInterval(f,1e3):clearInterval(r.current),()=>{r.current&&clearInterval(r.current)}),[s]);const f=async()=>{try{const t=await p.get("http://192.168.1.110:8080/photo.jpg",{responseType:"blob"});if(u(c=>[...c,t.data]),o.current){const c=URL.createObjectURL(t.data);o.current.src=c}}catch(t){console.error("Error al capturar la imagen:",t)}},h=()=>{e(!0)},g=()=>{e(!1),j()},j=()=>{const t=new x;a.forEach((c,i)=>{t.file(`captured_frame_${i}.jpg`,c)}),t.generateAsync({type:"blob"}).then(c=>{const i=document.createElement("a");i.href=URL.createObjectURL(c),i.download="captured_frames.zip",i.click()})};return n.jsxs("div",{children:[n.jsx("img",{ref:o,src:"http://192.168.1.110:8080/video",alt:"Video Stream",width:"529",height:"297"}),n.jsx("button",{onClick:m,children:"Capturar una imagen"}),n.jsx("button",{onClick:h,children:"Comenzar capturaci\xF3n"}),n.jsx("button",{onClick:g,children:"Parar capturaci\xF3n"})]})};function E(){return n.jsx(d.StrictMode,{children:n.jsx(y,{basename:"/react-webcam",children:n.jsx(R,{children:n.jsx(v,{path:"/",element:n.jsx(w,{})})})})})}b.createRoot(document.getElementById("root")).render(n.jsx(d.StrictMode,{children:n.jsx(E,{})}));
