import{r as l,j as e,a as m}from"./react-BkjPoRIh.js";import{c as L}from"./react-dom-DWN0RgAt.js";import{B as R}from"./react-router-dom-CyiGHeXB.js";import{a as p}from"./axios-Cm0UX6qg.js";import{J as C}from"./jszip-C_GpTb5M.js";import{F as S}from"./file-saver-B00IKLHc.js";import{u as U,a as w,b as g}from"./react-router-D3GXQn_V.js";import"./scheduler-CzFDRTuY.js";import"./@remix-run-Dql683DL.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const t of r)if(t.type==="childList")for(const n of t.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&i(n)}).observe(document,{childList:!0,subtree:!0});function o(r){const t={};return r.integrity&&(t.integrity=r.integrity),r.referrerPolicy&&(t.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?t.credentials="include":r.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function i(r){if(r.ep)return;r.ep=!0;const t=o(r);fetch(r.href,t)}})();const h=l.createContext({messages:[],addMessage:()=>{}}),I=({children:s})=>{const[o,i]=l.useState([]),r=t=>{i(n=>[...n,t])};return e.jsx(h.Provider,{value:{messages:o,addMessage:r},children:s})},f=()=>l.useContext(h),k=()=>{const[s,o]=l.useState([]),[i,r]=l.useState(!1),t=l.useRef(null),n=l.useRef(null),j=U(),{addMessage:u}=f(),b=async()=>{try{const a=await p.get("http://192.168.1.110:8080/photo.jpg",{responseType:"blob"});if(S.saveAs(a.data,"captura.jpg"),n.current){const c=URL.createObjectURL(a.data);n.current.src=c}}catch(a){console.error("Error al capturar la imagen:",a),u("Error al capturar la imagen:"+a)}};l.useEffect(()=>(i?t.current=setInterval(x,1e3):clearInterval(t.current),()=>{t.current&&clearInterval(t.current)}),[i]);const x=async()=>{try{const a=await p.get("http://192.168.1.110:8080/photo.jpg",{responseType:"blob"});if(o(c=>[...c,a.data]),n.current){const c=URL.createObjectURL(a.data);n.current.src=c}}catch(a){console.error("Error al capturar la imagen:",a)}},y=()=>{r(!0)},v=()=>{r(!1),N()},N=()=>{const a=new C;s.forEach((c,d)=>{a.file(`captured_frame_${d}.jpg`,c)}),a.generateAsync({type:"blob"}).then(c=>{const d=document.createElement("a");d.href=URL.createObjectURL(c),d.download="captured_frames.zip",d.click()})},E=()=>{j("/debug")};return e.jsxs("div",{children:[e.jsx("img",{ref:n,src:"http://192.168.1.110:8080/video",alt:"Video Stream",width:"529",height:"297",onError:a=>{u("Error al capturar la imagen:"+a)}}),e.jsx("button",{onClick:b,children:"Capturar una imagen"}),e.jsx("button",{onClick:y,children:"Comenzar capturaci\xF3n"}),e.jsx("button",{onClick:v,children:"Parar capturaci\xF3n"}),e.jsx("button",{onClick:E,children:"Debug"})]})},z=()=>{const{messages:s}=f();return e.jsx(e.Fragment,{children:e.jsx("div",{className:"debug-container",children:e.jsxs("div",{className:"debug-container-grid",children:[e.jsx("div",{className:"debug-container-grid-item-traza",children:e.jsx("ul",{children:s.map((o,i)=>o&&e.jsx("li",{children:o},i))})}),e.jsx("div",{className:"debug-container-grid-item-input-btns",children:e.jsx("div",{className:"debug-container-grid-item-input-field",children:e.jsxs("div",{className:"input-group mb-3",children:[e.jsx("div",{className:"input-group-prepend",children:e.jsx("span",{className:"input-group-text",id:"inputGroup-sizing-default",children:"UID"})}),e.jsx("input",{type:"number",name:"uid",placeholder:"UID del usuario que ha realizado test usabilidad",pattern:"^[0-9]+$",title:"Solo se permiten n\xFAmeros",className:"form-control","aria-label":"Default","aria-describedby":"inputGroup-sizing-default",required:!0})]})})})]})})})};function M(){return e.jsx(m.StrictMode,{children:e.jsx(I,{children:e.jsx(R,{basename:"/react-webcam",children:e.jsxs(w,{children:[e.jsx(g,{path:"/",element:e.jsx(k,{})}),e.jsx(g,{path:"/debug",element:e.jsx(z,{})})]})})})})}L.createRoot(document.getElementById("root")).render(e.jsx(m.StrictMode,{children:e.jsx(M,{})}));
